<div class="container-full h-100">
    <div class="row h-100">
        <div id="left-sidebar-wrapper" class="col-md-1 col-lg-1 d-flex flex-column">
            <ul class="nav flex-column align-items-center">
                <li class="nav-item"> <a href="#"></a><i class="fas fa-user-circle fa-4x"></i></a></li>
                <li class="nav-item"><a href="#"><i class="fas fa-tasks fa-3x"></i></a></li>
            </ul>
            <div class="text-center mt-auto">
                <button id="sign-out-button" type="button" class="btn btn-danger btn-rnd">Sign out</button>
            </div>

        </div>
        <div id="inner-sidebar-wrapper" class="col-md-3 col-lg-3">
            <div id="add-task" class="col-md-12">
                <textarea class="form-control txt-area-custom" placeholder="Add a new task" id="taskInput"></textarea>
		<input onfocus="(this.type='date')" class="form-control txt-area-custom-date" placeholder="Add task deadline" id="taskDeadline">
                <ul class="col-md-12 people-list">
                    <!--TODO placeholder values for the moment-->
                    <li><a style="color:rgb(41, 164, 212)"><i class="fas fa-user-circle fa-2x"></i></a></li>
                    <li><a style="color:rgb(252, 255, 101)"><i class="fas fa-user-circle fa-2x"></i></a></li>
                    <li><a style="color:rgb(238, 54, 54)"><i class="fas fa-user-circle fa-2x"></i></a></li>
                    <li><a style="color:rgb(121, 99, 131)"><i class="fas fa-user-circle fa-2x"></i></a></li>
                    <li class="float-right"><button class="btn btn-success btn-sm btn-rnd" id="postBtn">Create</button>
                    </li>
                </ul>
            </div>
            <div id="tasks" class="col-md-12 float-left tasks-section">
                <ul class="tasks-list">
                   {{#each task}}
					<div class="list-item">
						<label class="check-container">
							<h4>
								{{task}}
								<div class="task-user-name">	
									Created by: {{user_name}}
									<br>
									<script type = "text/javascript">
										var due = document.getElementById("{{_id}}2").innerHTML 
										var year = due.substring(0,4);
										var month = due.substring(5,7);
										var day= due.substring(8,10);
										var today = new Date();
										var dd = today.getDate();
										var mm = today.getMonth()+1;
										var yyyy = today.getFullYear();
										due2 = "Due in: ";
										if(yyyy!=year){
											if(yyyy>year){due2 = "";due3 ="Overdue by: "+((year-yyyy)*(-1))+ " years";}
											else if((year-yyyy)==1){due3 ="1 year";} 
											else{due3 =(year-yyyy)+ " years";} }
										else if(mm!=month){
											if(mm>month){due2 = "";due3 ="Overdue by: "+((month-mm)*(-1))+ " months";}
											else if((month-mm)==1){due3 ="1 month";} 
											else{due3 =(month-mm)+ " months";} }
										else if(dd!=day){
											if(dd>day){due2 = "";due3 ="Overdue by: "+((day-dd)*(-1))+ " days";}
											else if((day-dd)==1){due3 ="1 day";} 
											else{due3 =(day-dd)+ " days";} }
										else{due3 = "Due today"; due2="";}
										due = "Due by: "+day+"-"+month+"-"+year;
										document.getElementById("{{{_id}}}").innerHTML = due + "<div class=\"task-due-in\">"+due2+ "<span style=\"color:#fc5b57\">"+due3+ "</span></div>";
									</script>
									{{#if completed}}<br>
									Completed by: {{completed_user_name}}
									{{else}}
										{{#if date_due}}
										<span id="{{_id}}">'Due by' data not loaded</span>
										<span class="blank" id="{{_id}}2">{{{date_due}}}</span>
										{{/if}}				
									{{/if}}            </div>
							</h4>
							<input type="checkbox" id="check-complete" name="{{_id}}" {{#if completed}} checked {{/if}}>
							<span class="checkmark"></span>
						</label>
					</div>
					{{/each}}                
					</ul>
            </div>
        </div>
        <div class="col">
            <div class="row">
                <div class="col-md-12">
                    <h1 class="text-center">Chat</h1>
                </div>
            </div>
            <div class="row">
                <div id="messages" class="col-md-12 message-section">
                    {{#each message}}
                    <div class="{{style}}">
                        <div style="border-color:{{colour}};">
                            <p>{{text}}</p>
                        </div>
                        <span>{{user_name}}</span><br>
                    </div>
                    {{/each}}
                </div>

            </div>
            <div class="message-sender-section">
                <form>
                    <div class="input-group mb-3">
                        <input id="message-text" type="text" class="form-control input-msg-txt" placeholder="Type a message..."
                            aria-label="Type a message..." aria-describedby="basic-addon2">
                        <div class="input-group-append">
                            <input id="send-message" type="submit" value="Send" class="btn input-msg-btn" />
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<script src="/javascripts/tasks.js"></script>